<!DOCTYPE html>

<title>Hamilton: Click Battle!</title>
<body background="https://storage.needpix.com/rsynced_images/gold-smoke-watercolor-seamless.jpg">
<link href='./style.css' rel='stylesheet' />
<script src='./script.js'>
</script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
 crossorigin="anonymous"></script>

<script defer>
	var PLAYER_SCORE = 0;
  var CHALLENGER_SCORE = 0;
  var challenges = {}; // cell:str -> timeoutID:int

  const CELLS = [
    'cell-a1',
    'cell-a2',
    'cell-a3',
    'cell-b1',
    'cell-b2',
    'cell-b3',
    'cell-c1',
    'cell-c2',
    'cell-c3'
  ];
  
	function show_intructions() {
    alert("You are Hamilton in a battle with Burr! Press on the Hamilton logo before Aaron Burr scores a point. Be careful, the logos appear and disappear faster as time goes on!");
  }

  function update_score() {
    $('span#player_score').html(PLAYER_SCORE)
    $('span#challenger_score').html(CHALLENGER_SCORE)
  }

  function finish_challenge(cell /* DOM Element */) {
    $(cell).html('')
    clearTimeout(challenges[cell.id])
    delete challenges[cell.id]
    update_score()
  }

  // when a user clicks a part of the board
  function board_clicked(e) {
    var cell = e.target;
    if (cell.id == 'board') {
      return;
    } 

    if (cell.id in challenges) {
      PLAYER_SCORE += 1
      finish_challenge(cell)
    }
  }

  function place_challenge() {
    var cell = document.getElementById(
      getRandomElement(
        arrDiff(CELLS, Object.keys(challenges))
      )
    )

    if (cell === null) return 'board full';

    // set image to challenge    
    cell.innerHTML = '‚≠ê'

    function challenger_wins() {
      CHALLENGER_SCORE += 1
      finish_challenge(cell)
    }

    // start challenge timer using setTimeout
    challenges[cell.id] = setTimeout(challenger_wins, 3000)
  }

  setInterval(place_challenge, 2000)

</script>

<h1>Hamilton: Click Battle!</h1>

<section id='intructions'>
	<button onclick="show_intructions()">
    How to Play
  </button>
</section>

<section id='score'>
	<div>Hamilton: <span id='player_score'>0</span></div>
	<div>Burr: <span id='challenger_score'>0</span></div>
</section>

<section id='board' onmousedown='board_clicked(event)'>
  <span id='cell-a1'></span>
  <span id='cell-a2'></span>
  <span id='cell-a3'></span>
  <span id='cell-b1'></span>
  <span id='cell-b2'></span>
  <span id='cell-b3'></span>
  <span id='cell-c1'></span>
  <span id='cell-c2'></span>
  <span id='cell-c3'></span>
</section>
<script>
  function getRandomInt(max) {
  // returns random Int in [0, max)
  return Math.floor(Math.random() * Math.floor(max));
}

function getRandomElement(xs /* Array */) {
  return xs[getRandomInt(xs.length)];
}

function arrDiff(arrA, arrB) {
  return arrA.filter(x => !arrB.includes(x));
}
</script>
<style>
  body {
  display: flex;
  flex-direction: column;
  align-items: center;
}

section {
  padding: 10px 0;
}

section#board {
  display: grid;
  grid-template-columns: 150px 150px 150px;
  grid-template-rows: 150px 150px 150px; 
  column-gap: 5px;
  row-gap: 3px;
}

section#board > span {
  border: 1px dotted black;
  border-radius: 3px;
  width: 100%;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 300%;
}


</style>




  
  







